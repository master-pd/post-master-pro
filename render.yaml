services:
  - type: web
    name: post-master-pro
    env: node
    region: singapore
    plan: free
    branch: main
    buildCommand: |
      npm install
      npm run db:migrate
    startCommand: npm start
    healthCheckPath: /health
    autoDeploy: true
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3000
      - key: CLUSTER_ENABLED
        value: false
      - key: ENABLE_QUEUE
        value: false
      - key: ENABLE_SOCKETS
        value: true
      - key: ENABLE_SWAGGER
        value: true

databases:
  - name: postmasterdb
    databaseName: postmasterdb
    user: postmasteruser
    plan: free
    region: singapore